#include <stdio.h>

int main(int argc, char ** argv)
{
	int stacktest = 0;
	printf("&stacktest = %p\n", &stacktest);
	
	FILE *fp;
	int size;
	char* buf;
	
	//file open
	fp = fopen(argv[1],"rb");
	
	//file size
	fseek(fp, 0, SEEK_END);
	size = ftell(fp);
	fseek(fp, 0, SEEK_SET);
	
	//copy buf
	buf = (char*)malloc(sizeof(char) * size);
	fread(buf,size,sizeof(char),fp);
	
	//file close
	fclose(fp);
	
	printf("execute shellcode? Y/N\n");	
	
	char y;
	scanf("%s", &y);
	if(y == 'y'){
		(*(void (*)())buf)();
		return 0;
	}else{
		return 0;	
	}
}
